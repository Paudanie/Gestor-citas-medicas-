<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare - Registro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        medical: {
                            primary: '#2563eb',
                            secondary: '#1e40af',
                            accent: '#06b6d4',
                            success: '#10b981',
                            warning: '#f59e0b',
                            danger: '#ef4444'
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gradient-to-br from-blue-50 to-cyan-50 min-h-screen font-sans">

    <div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl w-full space-y-8">

            <!-- HEADER -->
            <div class="text-center">
                <div class="mx-auto h-16 w-16 bg-gradient-to-br from-medical-primary to-medical-accent rounded-full flex items-center justify-center mb-4 shadow-lg">
                    <svg class="h-8 w-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">MediCare</h2>
                <p class="text-gray-600">Crea tu cuenta de paciente</p>
            </div>

            <!-- FORMULARIO -->
            <div class="bg-white rounded-xl shadow-xl p-8 border border-gray-100">

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-900 text-center mb-2">Registro de Usuario</h3>
                    <p class="text-sm text-gray-600 text-center">Completa tus datos para crear tu cuenta</p>
                </div>

                <!-- ERRORES -->
                {% if form.errors %}
                <div class="mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                    <div class="flex items-center">
                        <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="font-medium">Por favor corrige los errores en el formulario.</span>
                    </div>
                </div>
                {% endif %}

                <form action="{% url 'registro_usuario' %}" method="POST">
                    {% csrf_token %}

                    <!-- DATOS PERSONALES -->
                    <div class="space-y-5">

                        <!-- RUT -->
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                </svg>
                                RUT
                            </label>
                            <input type="text" name="rut" id="rut" placeholder="12.345.678-9"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                            {% for error in form.rut.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                            {% endfor %}
                        </div>

                        <!-- NOMBRES Y APELLIDOS -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                    <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                    </svg>
                                    Nombres
                                </label>
                                <input type="text" name="first_name" id="first_name" placeholder="Juan Carlos"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                                {% for error in form.first_name.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                                {% endfor %}
                            </div>

                            <div>
                                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                    <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                    </svg>
                                    Apellidos
                                </label>
                                <input type="text" name="last_name" id="last_name" placeholder="Pérez González"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                                {% for error in form.last_name.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- EMAIL -->
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                </svg>
                                Correo electrónico
                            </label>
                            <input type="email" name="email" id="email" placeholder="tu@email.com"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                            {% for error in form.email.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                            {% endfor %}
                        </div>

                        <!-- FECHA Y TELÉFONO -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                    <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                                    </svg>
                                    Fecha de nacimiento
                                </label>
                                <input type="date" name="fecha_nac" id="fecha_nac"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                                {% for error in form.fecha_nac.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                                {% endfor %}
                            </div>

                            <div>
                                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                    <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                                    </svg>
                                    Teléfono
                                </label>
                                <input type="text" name="telefono" id="telefono" placeholder="+56 9 1234 5678"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                                {% for error in form.telefono.errors %}
                                    <p class="mt-1 text-red-600 text-sm flex items-center">
                                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                        {{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- DIRECCIÓN -->
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                                </svg>
                                Dirección
                            </label>
                            <input type="text" name="direccion" id="direccion" placeholder="Av. Principal 123, Santiago"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary"/>
                            {% for error in form.direccion.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                            {% endfor %}
                        </div>

                        <!-- DISCAPACIDADES -->
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-5 h-5 mr-2 text-medical-success" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                                </svg>
                                Discapacidades
                            </label>
                            <p class="text-xs text-gray-500 mb-2">Mantén presionado Ctrl (Windows) o Cmd (Mac) para seleccionar múltiples opciones</p>
                            <select name="discapacidades" multiple size="4"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary">
                            {% for d in form.discapacidades.field.queryset %}
                                <option value="{{ d.id }}"
                                    {% if d.id in form.discapacidades.value %}selected{% endif %}>
                                    {{ d.nombre }}
                                </option>
                            {% endfor %}
                            </select>
                            {% for error in form.discapacidades.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                            {% endfor %}
                        </div>

                        <!-- ENFERMEDADES -->
                        <div>
                            <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                                <svg class="w-5 h-5 mr-2 text-medical-success" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                Enfermedades
                            </label>
                            <p class="text-xs text-gray-500 mb-2">Mantén presionado Ctrl (Windows) o Cmd (Mac) para seleccionar múltiples opciones</p>
                            <select name="enfermedades" multiple size="4"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary">
                            {% for e in form.enfermedades.field.queryset %}
                                <option value="{{ e.id }}"
                                    {% if e.id in form.enfermedades.value %}selected{% endif %}>
                                    {{ e.nombre }}
                                </option>
                            {% endfor %}
                            </select>
                            {% for error in form.enfermedades.errors %}
                                <p class="mt-1 text-red-600 text-sm flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    {{ error }}
                                </p>
                            {% endfor %}
                        </div>

                        <!-- CONTRASEÑAS -->
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 p-5 rounded-lg border border-blue-100">
                            <h4 class="text-sm font-semibold text-gray-900 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-medical-primary" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                </svg>
                                Seguridad de la cuenta
                            </h4>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Contraseña</label>
                                    <input type="password" name="password1" id="password1" placeholder="••••••••"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary bg-white"/>
                                    {% for error in form.password1.errors %}
                                        <p class="mt-1 text-red-600 text-sm flex items-center">
                                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                            </svg>
                                            {{ error }}
                                        </p>
                                    {% endfor %}
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Confirmar contraseña</label>
                                    <input type="password" name="password2" id="password2" placeholder="••••••••"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-primary focus:border-transparent transition-all hover:border-medical-primary bg-white"/>
                                    {% for error in form.password2.errors %}
                                        <p class="mt-1 text-red-600 text-sm flex items-center">
                                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                            </svg>
                                            {{ error }}
                                        </p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <!-- CÓDIGO DOCTOR -->
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-5 rounded-lg border border-purple-100">
                            <h4 class="text-sm font-semibold text-gray-900 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                </svg>
                                Registro como Doctor (Opcional)
                            </h4>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Código de seguridad</label>
                                    <p class="text-xs text-gray-500 mb-2">Solo completa este campo si eres un doctor</p>
                                    <input type="text" name="codigo_seguridad" id="codigo_seguridad" placeholder="Ingresa tu código de doctor"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all hover:border-purple-400 bg-white"/>
                                    {% for error in form.codigo_seguridad.errors %}
                                        <p class="mt-1 text-red-600 text-sm flex items-center">
                                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                            </svg>
                                            {{ error }}
                                        </p>
                                    {% endfor %}
                                </div>

                                <!-- Campo de especialidad que se muestra solo cuando se ingresa código -->
                                <div id="campo-especialidad" style="display: none;">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Especialidad</label>
                                    <select name="especialidad" id="especialidad"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all hover:border-purple-400 bg-white">
                                        <option value="">Selecciona una especialidad</option>
                                        {% if form.especialidad.field.queryset %}
                                            {% for especialidad in form.especialidad.field.queryset %}
                                                <option value="{{ especialidad.id }}">{{ especialidad.nombre }}</option>
                                            {% endfor %}
                                        {% endif %}
                                    </select>
                                    {% for error in form.especialidad.errors %}
                                        <p class="mt-1 text-red-600 text-sm flex items-center">
                                            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                            </svg>
                                            {{ error }}
                                        </p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <!-- BOTÓN -->
                        <button type="submit"
                                class="w-full mt-6 bg-gradient-to-r from-medical-primary to-medical-accent text-white py-4 rounded-lg font-semibold shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-200 flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                            </svg>
                            Registrarse
                        </button>

                    </div>
                </form>
            </div>

            <!-- FOOTER -->
            <div class="text-center">
                <p class="text-sm text-gray-600">
                    ¿Ya tienes cuenta?
                    <a href="{% url 'login' %}" class="font-medium text-medical-primary hover:text-medical-secondary transition-colors">
                        Inicia sesión aquí
                    </a>
                </p>
                <p class="text-xs text-gray-500 mt-2">© 2025 MediCare. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>

    <!-- Script corregido: cambiado "codigo_secreto" por "codigo_seguridad" -->
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const codigoInput = document.querySelector('[name="codigo_seguridad"]');
        const divEspecialidad = document.getElementById("campo-especialidad");

        function toggleEspecialidad() {
            if (codigoInput && codigoInput.value.trim() !== "") {
                divEspecialidad.style.display = "block";
            } else {
                divEspecialidad.style.display = "none";
                // Cuando se oculta, vaciamos el campo
                const espInput = document.querySelector('[name="especialidad"]');
                if (espInput) {
                    espInput.value = "";
                }
            }
        }

        if (codigoInput) {
            codigoInput.addEventListener("input", toggleEspecialidad);
            toggleEspecialidad();
        }
    });
    </script>

</body>
</html>
